# README

## 实验介绍

本实验基于仓颉语言开发（最初版本），基于LR语法分析。以下是各阶段实验的详细描述：

### 实验1：词法分析DFA与文本搜索
- 完成了正则表达式状态转换图的相关操作函数。
- 基于TINY语言完成了TINY词法NFA、DFA图的搭建。
- 实现了关于TINY语言的文本搜索，能够将文本文件识别成token序列。

### 实验2：文法DFA与LR(0)语法分析表
- 基于产生式集合实现了LR(0)型DFA。
- 完成了LR(0)语法分析表。
- 搭建起基本的语法制导翻译框架。

### 实验3：正则表达式的词法、语法分析器与语法制导翻译
- 本实验原意在于完成正则表达式的词法、语法分析器、语法制导翻译（SDT）以及shift对应翻译操作，通过文件输入TINY语言的词法正则表达式得到其词法DFA。
- 然而，由于时间限制和个人能力原因，仅实现了正则表达式的基本词法分析器、语法分析器和语法制导翻译框架，代码中存在许多bug，无法完全跑通。（希望学有余力的同学能够依照原本的实验要求完善这部分内容）
- 在此实验中，为了达到最终TINY语言的目标，直接使用了实验1中的代码构造出的词法DFA，而非通过文本输入经由正则表达式编译翻译得到TINY语言的词法DFA。

### 实验4：语法制导的翻译实现
- 实现了TINY语言所有的SDT函数和shift函数（在TINY翻译过程中有时shift也会触发翻译动作）。
- 填补了语法制导翻译框架中缺失的部分，完成了TINY语言的语法制导翻译。
- 可以通过提前准备好的文件名（不带后缀tny）翻译出tm中间代码文件。[原TINY编译器源码以及tm虚拟机文件](https://github.com/bigconvience/BooksCode)供参考。tm虚拟机在src\testfiles\tm.exe路径下，运行tm虚拟机tm文件需在同一目录。
- 经过多数样本文件测试，本仓库代码可以覆盖实验指导书样例的基本要求，与原作者编译器产生的中间代码仅有少量跳转动作的中间代码行序的不同（这些不同不会影响中间代码在tm虚拟机运行的结果）。

## 补充说明
- 代码中包含了关于某书（yjm老师著）上样例的测试内容。
- 鉴于大三下学期同学们忙于处理其他事务，且本实验较为复杂、代码量较大，自本届(22级)实验要求使用仓颉语言编写，本仓库代码有所疏漏请谅解，仅供同学们参考。
- [关于TINY语言的词法语法介绍文档](https://wenku.baidu.com/view/1be4535101f69e3142329401.html?_wkts_=1741495761341&login_type=qzone)
- 关于tm中间代码，建议生成简单的tny文件通过tiny编译器编译成中间代码后自行阅读理解，这过程考验一点计算机系统阅读汇编的能力，其中指令含义、寻址方式、寄存器编号相关内容ai可以解释。
- [如何运行tm虚拟机](https://blog.csdn.net/yyd19981117/article/details/86695361)HNU学长出的帖子，respect！
- 关于SDT的实现，本人完全基于阅读tm中间代码来实现。可能理解有误，有兴趣可以阅读TINY编译器源码基于自己想法来完成。
创作不易，如果本项目对您有所帮助，请给个star支持一下吧！
